<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>


    function _isType(obj, type) {
        return (
            Object.prototype.toString.call(obj).toLowerCase() === '[object ' + type + ']'
        );
    }

    function structuralTransform(obj, parent, name) {
        if (_isType(obj, 'array')) {
            obj.forEach((item) => {
                let flag = _isType(item, 'array') || _isType(item, 'object');
                if (flag) {
                    structuralTransform(item, obj)
                } else {
                    // do nothing
                }
            })
        } else if (_isType(obj, 'object')) {
            Object.keys(obj).forEach((key) => {
                // let flag = _isType(obj[key], 'array') || _isType(obj[key], 'object');
                if (_isType(obj[key], 'array')) {
                    structuralTransform(obj[key],obj)
                } else if (_isType(obj[key], 'object')){
                    structuralTransform(obj[key], obj, key)
                } else {
                    let tem = (key === 'value') && (Object.keys(obj).length === 1);
                    if (tem) {
                        parent[name] = obj[key];
                        console.log(parent, '  >>> ',name,'  >>  ',obj[key]);
                        // console.log(' context >>>> ', parent);
                    }
                }
            });
            console.log(' end  >>> ')
        } else {
            // do nothing
        }
    }

    let test = {
        "appointUrl": "//h5.51ping.com/app/gfe-app-education-common-book/index.html?productId=867156&bookChannel=dp_product",
        "showTeacherNationality": true,
        "productItemInfoBeans": [{
            "skuId": 1469460,
            "itemName": "1",
            "classTotalHours": "2ihjf",
            "classLaw": "294",
            "classStartTime": "随到随学",
            "reduceTag": null,
            "classContentList": [{"title": "0kljasdf", "times": "1", "originPrice": {"value": "29"}}],
            "price": {"value": "29.00"},
            "originPrice": {"value": "16.01"},
            "reducePrice": null,
            "discountDetailInfo": null,
            "discountInfo": null
        }],
        "haveAppoint": true,
        "shareBean": {
            "url": "//h5.51ping.com/app/app-education-sku-all/skudetail.html?productId=867156&source=dianping&shopId=1880329",
            "image": "//p1.meituan.net/education/7d6c94e872d736a0c52743056397346f357703.jpg%40100w_100h_1e_1c_1l%7Cwatermark%3D0",
            "title": "【课程】仅售29元 | 韦博的日语考级 - 韦博英语(静安环球大厦中心)",
            "desc": "★★★☆☆\n静安寺 英语\n-09a-dfasdf",
            "content": "【课程】仅售29元 | 韦博的日语考级 - 韦博英语(静安环球大厦中心)"
        },
        "canRefund": true,
        "hasCollect": false,
        "canBuy": true,
        "productDetailLink": "//h5.51ping.com/edu/education-sku-detail/detail.html?productId=867156",
        "categoryIds": [102, 10202],
        "classDuration": "1小时",
        "phone": "4009811028",
        "hasLogin": true,
        "basicInfoBean": {
            "videoHeadpic": null,
            "videoUrl": null,
            "productName": "韦博的日语考级",
            "soldoutTotal": 6,
            "suitCrowds": "青少年",
            "suitBase": "初级",
            "classNum": "1对1",
            "teacherNationality": "外教",
            "imUrl": "dianping://web?url=https%3A%2F%2Fg.51ping.com%2Fapp%2Fbabyfe-app-baby-im%2Findex.html%3FshopId%3Dsb7td7mavw9jg1qg7%26clientType%3D100501",
            "haveIm": true,
            "classStudyTime": null,
            "classCatergoryName": "日语",
            "headpics": ["//p1.meituan.net/education/7d6c94e872d736a0c52743056397346f357703.jpg%40640w_360h_1e_1c_1l%7Cwatermark%3D0", "//p1.meituan.net/education/11d1ce90f846abeac00e2a549b711d96573546.jpg%40640w_360h_1e_1c_1l%7Cwatermark%3D0"],
            "minCurrentPrice": {"value": "27.01"},
            "maxCurrentPrice": {"value": "29.00"},
            "originPrice": {"value": "29.00"},
            "classHighlights": ["-09a-dfasdf"],
            "startTime": "2018-07-17T16:00:00.000Z",
            "endTime": "2099-08-15T15:59:59.000Z"
        },
        "bookingCount": 1,
        "enrollLink": "//h5.51ping.com/app/app-education-sku-all/skuorder.html?productId=867156&token=!&dpid=*",
        "categoryId": 2872
    }
    // structuralTransform(test);
    // console.log('  >>>>>>>   ', structuralTransform(test, test))

    console.log(JSON.stringify(test).replace(/(?:\{\"value\"\:\")(\d+\.?\d+)(?:\"\})/g, `"$1"`))



</script>

</body>
</html>